---
description: Core API service (@proxed/proxy) - Bun + Hono OpenAPI proxy
globs:
  - "apps/proxy/**/*"
alwaysApply: false
---
# `apps/proxy` (`@proxed/proxy`)

Core proxy service running on Bun using Hono + OpenAPI.

## Key entry points

- App bootstrap: `apps/proxy/src/index.ts`
- Routers: `apps/proxy/src/rest/routers.ts` and `apps/proxy/src/rest/routes/*`
- Middleware: `apps/proxy/src/rest/middleware/*`
- DB: `apps/proxy/src/db/*` (Drizzle + Postgres)
- Provider-specific helpers: `apps/proxy/src/utils/*`

## Conventions

- Use Hono patterns (not Next.js) and keep middleware order intentional.
- Security: enforce auth + DeviceCheck for iOS requests; never leak provider keys.
- Streaming responses should go through existing stream utilities (donâ€™t reinvent SSE parsing).
- Prefer structured errors via `apps/proxy/src/utils/errors.ts` and keep error responses consistent.

