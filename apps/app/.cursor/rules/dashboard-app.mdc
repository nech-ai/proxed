---
description: Dashboard app (@proxed/app) - Next.js App Router + Supabase SSR
globs:
  - "apps/app/**/*"
alwaysApply: false
---
# `apps/app` (`@proxed/app`)

Next.js 15 dashboard (React 19) with Supabase auth and i18n.

## Key entry points

- Routes: `apps/app/src/app/[locale]/...` (App Router)
- Middleware: `apps/app/src/middleware.ts` (i18n + Supabase session refresh)
- Server actions: `apps/app/src/actions/*`
- Trigger.dev bridge exports: `apps/app/jobs/*`
- Trigger config: `apps/app/trigger.config.ts`

## Conventions

- Prefer React Server Components; use `"use client"` only when necessary.
- Auth/session: use `@proxed/supabase/server`, `@proxed/supabase/client`, and `@proxed/supabase/middleware` (no `@supabase/auth-helpers-nextjs`).
- Middleware must keep calling `updateSession(...)` to prevent random logouts.
- Keep i18n wiring consistent with `next-international` (`createI18nMiddleware`).
- Use `next-safe-action` + Zod for server actions; validate inputs before DB calls.

