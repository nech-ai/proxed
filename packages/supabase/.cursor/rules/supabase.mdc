---
description: Conventions for @proxed/supabase (SSR clients, queries, mutations, generated types)
globs:
  - "packages/supabase/**/*.ts"
alwaysApply: false
---
# `@proxed/supabase`

Shared Supabase clients + query helpers used by apps and jobs.

## Public entrypoints (package exports)

- `@proxed/supabase/server` (RSC/server-side client)
- `@proxed/supabase/client` (browser client)
- `@proxed/supabase/middleware` (session refresh for Next middleware)
- `@proxed/supabase/api` (service-role / server API client)
- `@proxed/supabase/job` (service-role client for Trigger tasks)
- `@proxed/supabase/queries`, `@proxed/supabase/mutations`
- `@proxed/supabase/types` (generated DB types)

## Conventions

- Prefer using the exported clients; donâ€™t re-create Supabase clients in apps.
- Keep cookie handling limited to `getAll`/`setAll` in SSR/middleware clients.
- Keep DB access helpers in `queries/` and `mutations/` rather than scattering `.from(...)` calls across apps.

